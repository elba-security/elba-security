Hello :wave: We did some refactoring on the integrations codebase, from now please use the template to generate new integrations: pnpm generate, it should be easier for you to create integrations and for us easier to review. The refactoring was made to make developers and reviewers better and easier, while also focusing on a major change: getting rid of the communication between elba and the internal integrations using the elba API and directly relying on Inngest indead. Currently there is only one integration that has been refactored: Zoom, you can see here the PR to see the refactoring changes: https://github.com/elba-security/elba-security/pull/630/files
The most important changes can be found in
src/inngest/client.ts which contains the integration settings as well as the functions to sync / suspend users, validate installation etc.
src/connectors/{{integration}}/users.ts which contains the users' related integration api calls. The integration should now use IntegrationConnectionError & IntegrationError instead of defining custom errors
On Vercel side, to test the integration on staging we need to:
remove the preview environment variables: INNGEST_SIGNING_KEY & INNGEST_EVENT_KEY
link preview shared environment variables:  INNGEST_SIGNING_KEY & INNGEST_EVENT_KEY
On elba side, we need to:
Set saas.sources.inngest_app_id with the name of the inngest app
Set saas.sources.supports_suspend_user when the integration supports suspending/deleting users
From now on, please use pnpm generate to generate new integrations and update the one in reviews (it should be easy to generate the integration from scratch using the generation from template and keep only the users.ts / users.test.ts file with some small updates on other files)